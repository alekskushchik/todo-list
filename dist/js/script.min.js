let TODOS=[];document.addEventListener("DOMContentLoaded",(function(t){const e=document.querySelector(".buttons__create"),o=document.querySelector(".buttons__search"),s=document.querySelector(".search-task"),l=document.querySelector("#todo"),a=document.querySelector("#task-description"),n=document.querySelector("#add-task"),i=document.querySelector("#close-button"),c=document.querySelector("#pending-tasks"),d=document.querySelector(".bulk-actions"),r=document.querySelector(".filter-todos"),u="Pending",S="Done",O="Hold";function y(){let t={id:Date.now(),title:l.value,description:a.value,status:u};TODOS.push(t),localStorage.setItem("todos",JSON.stringify(TODOS)),f(TODOS),document.getElementById("overlay").style.display="none"}function f(t){c.innerHTML="";for(let e=0;e<t.length;e++){let o=`<li class="todo-item" data-key="${t[e].id}">\n                    <span class="status" data-status="${t[e].status}">${t[e].status}</span>\n                    <label data-status="${t[e].status}">${t[e].title}</label><input type="text">\n                    <p style="font-style: italic; font-size: 12px">${t[e].description}</p>\n                    <div class="buttons-container">\n                        <button class="edit" data-id="${t[e].id}" data-action="edit"><i class="fas fa-pencil-alt"></i> Edit</button>\n                        <button class="delete" data-action="delete"><i class="fas fa-trash"></i> Delete</button>\n                        <button class="hold" data-action="hold"><i class="fas fa-lock"></i> Hold</button>\n                        <button class="done" data-action="done"><i class="fas fa-check-double"></i> Done</button>\n                    </div>\n                    <div class="edit-mode">\n                        <button class="save" data-action="save"><i class="fas fa-save"></i> Save</button>\n                        <button class="cancel" data-action="cancel"><i class="fas fa-times"></i> Cancel</button>\n                    </div>\n            </li>`;c.innerHTML+=o}setTimeout(()=>function(){const t=document.querySelectorAll(".edit"),e=document.querySelectorAll(".delete"),o=document.querySelectorAll(".hold"),s=document.querySelectorAll(".done"),l=document.querySelectorAll(".save"),a=document.querySelectorAll(".cancel");t.forEach(t=>t.addEventListener("click",T)),e.forEach(t=>t.addEventListener("click",b)),o.forEach(t=>t.addEventListener("click",D)),s.forEach(t=>t.addEventListener("click",h)),l.forEach(t=>t.addEventListener("click",m)),a.forEach(t=>t.addEventListener("click",v))}(),500)}function g(t){const e=t.target.value.toLowerCase();document.querySelectorAll(".todo-item").forEach(t=>{t.querySelector("label").textContent.toLowerCase().indexOf(e)>-1?t.style.display="":t.style.display="none"})}function T(t){let e=t.target.closest("li"),o=e.querySelector("label"),s=e.querySelector("input[type=text]");e.classList.contains("editMode")?(o.innerText=s.value,e.querySelector(".buttons-container").style.display="block",e.querySelector(".edit-mode").style.display="none"):(s.value=o.innerText,e.querySelector(".buttons-container").style.display="none",e.querySelector(".edit-mode").style.display="flex"),e.classList.toggle("editMode")}function m(t){let e=t.target.closest("li"),o=e.querySelector("label"),s=e.querySelector("input[type=text]");for(let t=0;t<TODOS.length;t++)TODOS[t].title=o.innerText=s.value,e.querySelector(".buttons-container").style.display="flex",e.querySelector(".edit-mode").style.display="none";e.classList.toggle("editMode")}function v(t){let e=t.target.closest("li");e.querySelector(".buttons-container").style.display="flex",e.querySelector(".edit-mode").style.display="none",e.classList.toggle("editMode")}function b(){for(let t=0;t<TODOS.length;t++)+this.closest(".todo-item").getAttribute("data-key")===TODOS[t].id&&TODOS.splice(t,1);localStorage.setItem("todos",JSON.stringify(TODOS)),f(TODOS)}function D(t){for(let e=0;e<TODOS.length;e++)if(+t.target.closest("li").getAttribute("data-key")===TODOS[e].id)if(TODOS[e].status!==O){TODOS[e].status=O,localStorage.setItem("todos",JSON.stringify(TODOS)),t.target.closest("li").querySelector(".status").innerHTML=TODOS[e].status,t.target.closest("li").querySelectorAll("button").forEach(t=>{t.classList.toggle("disabled"),t.disabled=!t.disabled,"hold"===t.getAttribute("data-action")&&(t.disabled=!1,t.classList.remove("disabled")," Hold"===t.innerText?t.innerHTML='<i class="fas fa-unlock"></i> Unhold':t.innerHTML='<i class="fas fa-lock"></i> Hold')})}else TODOS[e].status=u,localStorage.setItem("todos",JSON.stringify(TODOS)),f(TODOS),t.target.closest("li").querySelector(".status").innerHTML=TODOS[e].status}function h(t){for(let e=0;e<TODOS.length;e++)+t.target.closest("li").getAttribute("data-key")===TODOS[e].id&&(TODOS[e].status===u?TODOS[e].status=S:TODOS[e].status=u,t.target.closest("li").querySelector("label").classList.toggle("checked"));localStorage.setItem("todos",JSON.stringify(TODOS)),f(TODOS)}null!==localStorage.getItem("todos")&&(TODOS=JSON.parse(localStorage.getItem("todos"))),e.addEventListener("click",(function(){setTimeout(()=>(l.value="",a.value="",document.getElementById("overlay").style.display="block",void l.focus()),500)})),i.addEventListener("click",(function(){document.getElementById("overlay").style.display="none"})),l.addEventListener("keydown",(function(t){"Enter"!==t.code&&"NumpadEnter"!==t.code||""===l.value||setTimeout(()=>y(),500)})),n.addEventListener("click",(function(){""!==l.value&&setTimeout(()=>y(),500)})),o.addEventListener("click",(function(){s.classList.toggle("hidden");const t=document.querySelector("#searchInput");t.focus(),t.addEventListener("keyup",g),t.value=""})),d.addEventListener("change",t=>{"mark-as-done"===t.target.value?setTimeout(()=>(TODOS.forEach(t=>{t.status=S}),localStorage.setItem("todos",JSON.stringify(TODOS)),void f(TODOS)),500):"hold/unhold"===t.target.value?setTimeout(()=>{TODOS.forEach(t=>{t.status=O,f(TODOS),c.querySelectorAll("button").forEach(t=>{t.classList.toggle("disabled"),t.disabled=!t.disabled,"hold"===t.getAttribute("data-action")&&(t.disabled=!1,t.classList.remove("disabled"),t.innerHTML='<i class="fas fa-unlock"></i> Unhold')})})},500):"remove-all"===t.target.value&&setTimeout(()=>(TODOS=[],localStorage.setItem("todos",JSON.stringify(TODOS)),void f(TODOS)),500)}),r.addEventListener("change",t=>{"by-title"===t.target.value?setTimeout(()=>(TODOS.sort((function(t,e){return t.title<e.title?-1:t.title>e.title?1:0})),localStorage.setItem("todos",JSON.stringify(TODOS)),void f(TODOS)),500):"by-status"===t.target.value&&setTimeout(()=>(TODOS.sort((function(t,e){return t.status<e.status?-1:t.status>e.status?1:0})),localStorage.setItem("todos",JSON.stringify(TODOS)),void f(TODOS)),500)}),f(TODOS)}));